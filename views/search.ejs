<!DOCTYPE html>
<html>
<head>
    <title>Account List</title>
</head>
<body>

    <form action="/api/search" method="GET">
        <input type="text" id="search" name="searchTerm" placeholder="Search"><br><br>
        <button type="submit">Search</button><br><br>
    </form>

    <h1>List of Accounts</h1>
    <ul>
        <% accounts = locals.rows %>
        <% if (accounts && accounts.length > 0) { %>
            <% for (let i = 0; i < accounts.length; i++) { %>
                <li>
                    <div class="account-row">
                        <div class="account-info">
                            <p>Name: <%= accounts[i].name || 'No Name' %></p>
                            <p>Username: <%= accounts[i].username %></p>
                        </div>
                        <div class="account-button">
                            <form action="/account/<%= accounts[i].username %>" method="get">
                                <button type="submit">View Profile</button>
                            </form>
                        </div>
                    </div>
                </li>
            <% } %>
        <% } else { %>
            <li>No accounts found.</li>
        <% } %>
    </ul>

    <script>
        fetch('/api/search') // This should be the URL to your search.js endpoint
  .then(response => response.json())
  .then(data => {
    // Handle the JSON data here
    // Update the DOM with the data as needed
    // For example, you can dynamically create HTML elements to display the results
    if (data && data.length > 0) {
      data.forEach(account => {
        // Create and append elements to display the search results
        const resultElement = document.createElement('div');
        resultElement.textContent = `Name: ${account.name || 'No Name'}, Username: ${account.username}`;
        // Append the resultElement to the DOM
        document.getElementById('resultsContainer').appendChild(resultElement);
      });
    } else {
      // Handle the case when there are no results
      document.getElementById('resultsContainer').textContent = 'No accounts found.';
    }
  })
  .catch(error => {
    console.error('Error fetching data:', error);
  });
    </script>
</body>
</html>
    